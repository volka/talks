<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Volker Aßmann (volker.assmann@gmail.com)">
  <title>Rust - Short Intro, Ownership</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="template/css/reset.css">
  <link rel="stylesheet" href="template/css/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="template/css/theme/black.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'template/css/print/pdf.css' : 'template/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="template/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="rust-logo-blk.svg" data-background-size="contain">
  <h1 class="title">Rust - Short Intro, Ownership</h1>
  <p class="author">Volker Aßmann (volker.assmann@gmail.com)</p>
  <p class="date">12.03.2020</p>
</section>

<section id="hello-world" class="slide level2">
<h2>Hello World</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">fn</span> main()</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="pp">println!</span>(<span class="st">&quot;Hello, World&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="hello-x" class="slide level2">
<h2>Hello X!</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">fn</span> hello(name<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>) <span class="op">-&gt;</span> <span class="dt">String</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="pp">format!</span>(<span class="st">&quot;Hello, {}!&quot;</span><span class="op">,</span> name)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="op">}</span></span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>    <span class="kw">let</span> name <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="st">&quot;Rust&quot;</span>)<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> hello(<span class="op">&amp;</span>name))<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="what-is-rust" class="slide level2">
<h2>What is Rust?</h2>
<ul>
<li>System language like C++, started at Mozilla</li>
<li>Main focus
<ul>
<li>Safety (memory, threading …)</li>
<li>Speed (same league as C/C++)</li>
<li>Good compiler errors</li>
</ul></li>
<li>Very new language (1.0: 2015), rapid development, e.g. new futures/async
<ul>
<li>“<a href="https://doc.rust-lang.org/edition-guide/editions/index.html">Editions</a>” to stabilize language</li>
<li>Currently Edition 2015 and 2018</li>
</ul></li>
<li><a href="https://github.com/rust-unofficial/awesome-rust">Used in</a>: Firefox, System/<a href="https://rust-embedded.github.io/book">Embedded</a> Programming, <a href="https://www.redox-os.org">OS</a>/Kernel, Web(assembly)</li>
</ul>
</section>
<section id="tooling" class="slide level2">
<h2>Tooling</h2>
<ul>
<li>Compiler - rustc, based on LLVM</li>
<li><code>rustup</code> for release management
<ul>
<li>stable/beta/nightly releases</li>
<li>cross compilers</li>
</ul></li>
<li>Build tool / packaging: cargo + <a href="https://crates.io">crates.io</a></li>
<li>rustfmt, rustdoc</li>
<li>IDEs: Vim, VS Code (“Racer” plugin), CLion …</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="ex">cargo</span> new --bin MyProject</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="ex">cargo</span> build</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="ex">cargo</span> run</span></code></pre></div>
</section>
<section id="great-documentation" class="slide level2">
<h2>Great Documentation</h2>
<ul>
<li>On doc.rust-lang.org
<ul>
<li><a href="https://www.rust-lang.org/learn">Learning Rust Overview</a></li>
<li><a href="https://doc.rust-lang.org/book/title-page.html">Rust Programming Language</a></li>
<li><a href="https://doc.rust-lang.org/stable/rust-by-example">Rust By Example</a></li>
<li><a href="https://doc.rust-lang.org/reference/index.html">Rust Reference</a></li>
<li><a href="https://doc.rust-lang.org/nomicon/">Rustonomicon</a> (The Dark Arts of Unsafe Rust)</li>
</ul></li>
<li>Others
<ul>
<li><a href="https://rust-lang-nursery.github.io/rust-cookbook">Rust Cookbook</a></li>
<li><a href="https://rust-lang.github.io/async-book">Async Programming in Rust</a></li>
<li><a href="https://github.com/rust-lang/rustlings">Rustlings</a></li>
</ul></li>
</ul>
</section>
<section id="constants-variables" class="slide level2">
<h2>Constants &amp; Variables</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">42</span><span class="op">;</span> <span class="co">// immutable integer</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw">let</span> <span class="kw">mut</span> y<span class="op">:</span> <span class="dt">i32</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// mutable integer</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw">let</span> z <span class="op">=</span>  y <span class="kw">as</span> <span class="dt">u8</span><span class="op">;</span> <span class="co">// explicit conversion</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">const</span>  THRESHOLD <span class="op">:</span> <span class="dt">i32</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">// unchangeable value, type required!</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="kw">static</span> LANG<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span> <span class="op">=</span> <span class="st">&quot;Rust&quot;</span><span class="op">;</span> <span class="co">// global with static lifetime</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>                            <span class="co">//  may be mut, access is unsafe!</span></span></code></pre></div>
</section>
<section id="data-types---primitive-types" class="slide level2">
<h2>Data Types - Primitive Types</h2>
<ul>
<li><code>bool</code>, <code>char</code> (4 byte char)</li>
<li>Scalars
<ul>
<li>Integer: <code>i8</code>, <code>i16</code>, <code>i32</code>, <code>i64</code>, <code>u8</code>, <code>u16</code>, <code>u32</code>, <code>u64</code>, <code>isize</code>, <code>usize</code> (default <code>i32</code>)</li>
<li>Floats: <code>f32</code>, <code>f64</code> (default <code>f64</code>)</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">2.0</span><span class="op">;</span> <span class="co">// f64</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">let</span> y<span class="op">:</span> <span class="dt">f32</span> <span class="op">=</span> <span class="dv">3.0</span><span class="op">;</span> <span class="co">// f32</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="kw">let</span> z <span class="op">=</span> <span class="dv">3.14f32</span><span class="op">;</span> <span class="co">// f32 literal, works for int types too</span></span></code></pre></div></li>
</ul>
</section>
<section id="data-type---compound-types" class="slide level2">
<h2>Data Type - Compound Types</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">// Array</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw">let</span> array<span class="op">:</span> [<span class="dt">i32</span><span class="op">;</span> <span class="dv">5</span>] <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span>]<span class="op">;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co">// Slice</span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="kw">let</span> slice <span class="op">=</span> <span class="op">&amp;</span>array[<span class="dv">0</span><span class="op">..</span><span class="dv">3</span>]<span class="op">;</span> <span class="co">// 0,1,2</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co">// str - a string slice</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="kw">let</span> s <span class="op">=</span> <span class="st">&quot;hello&quot;</span><span class="op">;</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co">// Tuple</span></span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="kw">let</span> tup <span class="op">=</span> (<span class="st">&quot;hello&quot;</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="st">&quot;world&quot;</span><span class="op">,</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>])<span class="op">;</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">// Vec (like std::vector)</span></span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="co">// String - UTF-8 encoded growable string, like Vec&lt;char&gt;</span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="kw">let</span> s <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="st">&quot;💖&quot;</span>)<span class="op">;</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="kw">let</span> v <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">0xF0</span><span class="op">,</span> <span class="dv">0x9F</span><span class="op">,</span> <span class="dv">0x98</span><span class="op">,</span> <span class="dv">0x88</span>]<span class="op">;</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="kw">let</span> t <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from_utf8(v)<span class="op">.</span>unwrap()<span class="op">;</span></span></code></pre></div>
</section>
<section id="functions" class="slide level2">
<h2>Functions</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">fn</span> negate(i<span class="op">:</span> <span class="dt">i32</span>) <span class="op">-&gt;</span> <span class="dt">i32</span> <span class="op">{</span> <span class="op">-</span>i <span class="op">}</span></span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="kw">use</span> <span class="pp">std::</span>fmt<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="kw">pub</span> <span class="kw">fn</span> func_name<span class="op">&lt;</span>T<span class="op">:</span> <span class="pp">fmt::</span><span class="bu">Display</span><span class="op">&gt;</span>(arg1<span class="op">:</span> T) <span class="op">-&gt;</span> <span class="dt">String</span> <span class="op">{}</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="op">{</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> arg1)<span class="op">;</span> <span class="co">// guaranteed to work by Type bound</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="pp">format!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> arg1)   </span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="op">}</span></span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co">// negate only accessible in same module</span></span></code></pre></div>
</section>
<section id="data-types---structs" class="slide level2">
<h2>Data Types - Structs</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">struct</span> <span class="cn">Nil</span><span class="op">;</span> <span class="co">// empty</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">struct</span> Pair(<span class="dt">i32</span><span class="op">,</span> <span class="dt">i64</span>)<span class="op">;</span> <span class="co">// tuple struct (named tuple)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb9-1"><a href="#cb9-1"></a><span class="at">#[</span>derive<span class="at">(</span><span class="bu">Debug</span><span class="at">)]</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="kw">struct</span> Person<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span> <span class="op">{</span> <span class="co">// Struct with two fields and lifetime</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>    name<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span><span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>    age<span class="op">:</span> <span class="dt">u8</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="op">}</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="kw">impl</span> Person<span class="op">&lt;</span><span class="ot">&#39;_</span><span class="op">&gt;</span> <span class="op">{</span> <span class="co">// anonymous lifetime</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="co">// const method</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>    <span class="kw">fn</span> greet(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">String</span> <span class="op">{</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>        <span class="pp">format!</span>(<span class="st">&quot;Hello, {}&quot;</span><span class="op">,</span> <span class="kw">self</span><span class="op">.</span>name)</span>
<span id="cb9-10"><a href="#cb9-10"></a>    <span class="op">}</span></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="op">}</span></span>
<span id="cb9-12"><a href="#cb9-12"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> Person<span class="op">{</span>name<span class="op">:</span> <span class="st">&quot;Isabelle&quot;</span><span class="op">,</span> age<span class="op">:</span> <span class="dv">1</span><span class="op">}.</span>greet())<span class="op">;</span></span></code></pre></div>
</section>
<section id="data-types---struct-error" class="slide level2">
<h2>Data Types - Struct Error</h2>
<ul>
<li>Person def without lifetime on &amp;str would be error</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1"></a><span class="ex">error</span>[E0106]: missing lifetime specifier</span>
<span id="cb10-2"><a href="#cb10-2"></a> <span class="ex">--</span><span class="op">&gt;</span> src/main.rs:4:11</span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="kw">|</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="ex">4</span> <span class="kw">|</span>     <span class="ex">name</span>: <span class="kw">&amp;</span><span class="ex">str</span>,</span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="kw">|</span>           ^ <span class="ex">expected</span> lifetime parameter</span></code></pre></div>
<ul>
<li>Anonynous lifetime optional, marks that lifetime is inferred</li>
</ul>
</section>
<section id="data-types---enums" class="slide level2">
<h2>Data Types - Enums</h2>
<p>Much more powerful than in C++</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">enum</span> Message <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>    Quit<span class="op">,</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>    ChangeColor(<span class="dt">i32</span><span class="op">,</span> <span class="dt">i32</span><span class="op">,</span> <span class="dt">i32</span>)<span class="op">,</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>    Move <span class="op">{</span>x<span class="op">:</span> <span class="dt">i32</span><span class="op">,</span> y<span class="op">:</span> <span class="dt">i32</span><span class="op">},</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>    <span class="bu">Write</span>(<span class="dt">String</span>)</span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="op">}</span></span>
<span id="cb11-7"><a href="#cb11-7"></a><span class="kw">let</span> x<span class="op">:</span> Message <span class="op">=</span> <span class="pp">Message::</span>Move<span class="op">{</span> x<span class="op">:</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">:</span> <span class="dv">2</span><span class="op">};</span></span></code></pre></div>
</section>
<section id="matching" class="slide level2">
<h2>Matching</h2>
<p><code>match</code> is like a powerful switch / <code>if</code> cascade</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="kw">let</span> as_string <span class="op">=</span> <span class="kw">match</span> x <span class="op">{</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="dv">1</span> <span class="op">=&gt;</span> <span class="st">&quot;one&quot;</span><span class="op">,</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="dv">2</span> <span class="op">=&gt;</span> <span class="st">&quot;two&quot;</span><span class="op">,</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    _ <span class="op">=&gt;</span> <span class="st">&quot;sorry, can only count to two...&quot;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="op">};</span></span></code></pre></div>
<p>Match needs to be <em>exhaustive</em> (thus the <code>_</code>)</p>
</section>
<section id="matching-and-enums" class="slide level2">
<h2>Matching and Enums</h2>
<p>Bind values from variant for use in match</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">fn</span> receive(msg<span class="op">:</span> Message) <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>    <span class="kw">match</span> msg <span class="op">{</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>        <span class="pp">Message::</span>Quit <span class="op">=&gt;</span> <span class="pp">panic!</span>(<span class="st">&quot;we want to leave FAST!&quot;</span>)<span class="op">,</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>        <span class="pp">Message::</span>ChangeColor(r<span class="op">,</span>g<span class="op">,</span>b) <span class="op">=&gt;</span> change_color(r<span class="op">,</span>g<span class="op">,</span>b)<span class="op">,</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>        <span class="pp">Message::</span>Move <span class="op">{</span>x<span class="op">:</span> x<span class="op">,</span> y<span class="op">:</span> y<span class="op">}</span> <span class="op">=&gt;</span> move_cursor(x<span class="op">,</span> y)<span class="op">,</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>        <span class="pp">Message::</span><span class="bu">Write</span>(s) <span class="op">=&gt;</span> <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> s)<span class="op">,</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="op">}</span></span>
<span id="cb13-8"><a href="#cb13-8"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="control-flow" class="slide level2">
<h2>Control Flow</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">if</span> x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;x is even!&quot;</span>)<span class="op">;</span> <span class="op">}</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="kw">else</span> <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;x is odd!&quot;</span>)<span class="op">;</span> <span class="op">}</span></span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co">// infinite loop without break</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="kw">loop</span> <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;I&#39;m alive!&quot;</span>)<span class="op">;</span> <span class="kw">break</span><span class="op">;</span> <span class="op">}</span> </span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="kw">let</span> <span class="kw">mut</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="kw">while</span> i <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;hello&quot;</span>)<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">let</span> <span class="kw">mut</span> x <span class="op">=</span> <span class="pp">vec!</span>[<span class="st">&quot;C++&quot;</span><span class="op">,</span> <span class="st">&quot;Rust&quot;</span><span class="op">,</span> <span class="st">&quot;Go&quot;</span><span class="op">,</span> <span class="st">&quot;Python&quot;</span>]<span class="op">;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="kw">for</span> text <span class="kw">in</span> x <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;I like {}.&quot;</span><span class="op">,</span> text)<span class="op">;</span> <span class="op">}</span></span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="kw">for</span> (i<span class="op">,</span> text) <span class="kw">in</span> v<span class="op">.</span>iter()<span class="op">.</span>enumerate() <span class="op">{</span> <span class="co">/* ... use i, text */</span> <span class="op">}</span></span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="kw">while</span> <span class="kw">let</span> <span class="cn">Some</span>(y) <span class="op">=</span> x<span class="op">.</span>pop() <span class="op">{</span> <span class="co">/* ... use y */</span> <span class="op">}</span></span>
<span id="cb15-6"><a href="#cb15-6"></a></span>
<span id="cb15-7"><a href="#cb15-7"></a><span class="kw">for</span> n <span class="kw">in</span> <span class="dv">1</span><span class="op">..</span><span class="dv">11</span> <span class="op">{</span> <span class="co">/* ... use n */</span> <span class="op">}</span></span></code></pre></div>
</section>
<section id="lambdas" class="slide level2">
<h2>Lambdas</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb16-1"><a href="#cb16-1"></a><span class="co">// lambda:</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="kw">let</span> a <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span> <span class="kw">let</span> b <span class="op">=</span> <span class="st">&quot;, world&quot;</span><span class="op">;</span></span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co">// types inferred, b captured:</span></span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="kw">let</span> x <span class="op">=</span> <span class="op">|</span><span class="kw">in</span><span class="op">|</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="kw">in</span>) <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="co">// with type annotations:</span></span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="kw">let</span> y <span class="op">=</span> <span class="op">|</span><span class="kw">in</span><span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">|</span> <span class="op">-&gt;</span> <span class="dt">String</span> <span class="op">{</span> <span class="op">...</span> <span class="op">}</span></span>
<span id="cb16-9"><a href="#cb16-9"></a></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x(a))<span class="op">;</span></span></code></pre></div>
</section>
<section id="constructors-destructors" class="slide level2">
<h2>Constructors / Destructors</h2>
<ul>
<li>Copy vs. Clone</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb17-1"><a href="#cb17-1"></a><span class="co">// &quot;constructors&quot; just a convention!</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="kw">impl</span><span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>    <span class="kw">pub</span> <span class="kw">fn</span> new() <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span>T<span class="op">&gt;</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span></span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">use</span> <span class="pp">vec::</span><span class="dt">Vec</span><span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="kw">let</span> <span class="kw">mut</span> v <span class="op">=</span> <span class="dt">Vec</span><span class="pp">::</span>new()<span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">// actually, for Vec there is a macro:</span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="kw">let</span> <span class="kw">mut</span> w <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">// Desrtuctors implement std::ops::Drop::drop</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="kw">impl</span> <span class="bu">Drop</span> <span class="kw">for</span> X <span class="op">{</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="kw">fn</span> drop(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>) <span class="op">{}</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="error-handling" class="slide level2">
<h2>Error Handling</h2>
<p>Rust uses Result&lt;T,E&gt; type for Error Handling (no exceptions)</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb20-1"><a href="#cb20-1"></a><span class="at">#[</span>must_use<span class="at">]</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="kw">enum</span> <span class="dt">Result</span><span class="op">&lt;</span>T<span class="op">,</span> E<span class="op">&gt;</span> <span class="op">{</span> <span class="cn">Ok</span>(T)<span class="op">,</span> <span class="cn">Err</span>(E) <span class="op">}</span></span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="kw">fn</span> may_fail(<span class="kw">in</span><span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>) <span class="op">-&gt;</span> <span class="dt">Result</span><span class="op">&lt;</span><span class="dt">i32</span><span class="op">,</span> ParseIntError<span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="kw">let</span> x <span class="op">=</span> <span class="kw">in</span><span class="op">.</span><span class="pp">parse::</span><span class="op">&lt;</span><span class="dt">u8</span><span class="op">&gt;</span>()<span class="op">;</span> <span class="co">// from trait std::str::FromStr</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="co">// let y = x.unwrap(); -- will panic if error, often found in examples</span></span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="kw">match</span> x <span class="op">{</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>        <span class="cn">Ok</span>(i) <span class="op">=&gt;</span> <span class="pp">println!</span>(<span class="st">&quot;The number is {}&quot;</span><span class="op">,</span> i)<span class="op">,</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>        <span class="cn">Err</span>(e) <span class="op">=&gt;</span> <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;{:?}&quot;</span><span class="op">,</span> e)<span class="op">;</span> <span class="kw">return</span> e<span class="op">;</span> <span class="op">}</span> <span class="co">// #[derive(Debug)]</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>    <span class="op">}</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>    <span class="co">// Shortcuts:</span></span>
<span id="cb20-12"><a href="#cb20-12"></a>    <span class="kw">return</span> <span class="kw">in</span><span class="op">.</span>parse<span class="op">&lt;</span><span class="dt">i32</span><span class="op">&gt;</span>()<span class="op">?;</span></span>
<span id="cb20-13"><a href="#cb20-13"></a>    <span class="kw">return</span> <span class="kw">try</span><span class="op">!</span>(<span class="kw">in</span><span class="op">.</span>parse<span class="op">&lt;</span><span class="dt">i32</span><span class="op">&gt;</span>())<span class="op">;</span></span>
<span id="cb20-14"><a href="#cb20-14"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="traits" class="slide level2">
<h2>Traits</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb21-1"><a href="#cb21-1"></a><span class="kw">trait</span> Format <span class="op">{</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>    <span class="kw">fn</span> format(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">String</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>    <span class="co">// default impl</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="kw">fn</span> print(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> format(<span class="kw">self</span>))<span class="op">;</span> <span class="op">}</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb22-1"><a href="#cb22-1"></a><span class="kw">impl</span> Format <span class="kw">for</span> <span class="dt">i32</span> <span class="op">{</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>    <span class="kw">fn</span> format(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">String</span> <span class="op">{</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>        <span class="pp">format!</span>(<span class="st">&quot;Int({})&quot;</span><span class="op">,</span> <span class="kw">self</span>)</span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="op">}</span></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="op">}</span></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="kw">impl</span> Format <span class="kw">for</span> <span class="dt">f64</span> <span class="op">{</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>    <span class="kw">fn</span> format(<span class="op">&amp;</span><span class="kw">self</span>) <span class="op">-&gt;</span> <span class="dt">String</span> <span class="op">{</span> </span>
<span id="cb22-8"><a href="#cb22-8"></a>        <span class="pp">format!</span>(<span class="st">&quot;Double({})&quot;</span><span class="op">,</span> <span class="kw">self</span>)</span>
<span id="cb22-9"><a href="#cb22-9"></a>    <span class="op">}</span></span>
<span id="cb22-10"><a href="#cb22-10"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>Impl only allowed in either trait module or type module!</li>
<li>No inheritance!</li>
</ul>
</section>
<section id="trait-objects" class="slide level2">
<h2>Trait Objects</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="kw">let</span> y <span class="op">=</span> <span class="dv">3.14</span><span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="kw">let</span> v<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;&amp;</span><span class="kw">dyn</span> Format<span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="op">&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y]<span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a></span>
<span id="cb23-5"><a href="#cb23-5"></a><span class="kw">for</span> it <span class="kw">in</span> v <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;Item: {}&quot;</span><span class="op">.</span> it<span class="op">.</span>format())<span class="op">;</span> <span class="op">}</span></span>
<span id="cb23-6"><a href="#cb23-6"></a></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="kw">fn</span> do_static<span class="op">&lt;</span>T<span class="op">:</span> Format<span class="op">&gt;</span>(x<span class="op">:</span> T) <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x<span class="op">.</span>format())<span class="op">;</span> <span class="op">}</span></span>
<span id="cb23-8"><a href="#cb23-8"></a><span class="kw">fn</span> do_dynRef(x<span class="op">:</span> <span class="op">&amp;</span><span class="kw">dyn</span> Format) <span class="op">{</span> <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x<span class="op">.</span>format())<span class="op">;</span> <span class="op">}</span></span>
<span id="cb23-9"><a href="#cb23-9"></a><span class="kw">fn</span> do_dynPtr(x<span class="op">:</span> <span class="dt">Box</span><span class="op">&lt;</span><span class="kw">dyn</span> Format<span class="op">&gt;</span>) <span class="op">{</span> x<span class="op">.</span>print()<span class="op">;</span> <span class="op">}</span></span>
<span id="cb23-10"><a href="#cb23-10"></a></span>
<span id="cb23-11"><a href="#cb23-11"></a>do_static(x)<span class="op">;</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>do_dynRef(<span class="op">&amp;</span>y)<span class="op">;</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>do_dynPtr(<span class="dt">Box</span><span class="pp">::</span>new(<span class="dv">666</span>))<span class="op">;</span></span></code></pre></div>
</section>
<section id="safety" class="slide level2">
<h2>Safety</h2>
<p>Two languages: SAFE Rust and UNSAFE Rust</p>
<ul>
<li>Safe Rust - Compiler ENFORCES lifetimes and sharing rules, sane defaults:
<ul>
<li>Automated bounds / integer checks, PANIC!</li>
<li>Borrow checking / reference integrity checks</li>
<li>Variables / references immutable by default, no implicit copies etc</li>
<li>No Undefined Behavior in SAFE Rust !</li>
</ul></li>
<li>Unsafe Rust - disable checks in unsafe {} scope
<ul>
<li>Semantic: “the developer has verified that this works!”</li>
<li>E.g. unsafe traits Send / Sync</li>
</ul></li>
</ul>
</section>
<section id="memory-safety-microsoft" class="slide level2">
<h2>Memory Safety: Microsoft</h2>
<p><img data-src="Microsoft_Memory_Safety_CVEs.png" /></p>
</section>
<section id="memory-safety-chromium" class="slide level2">
<h2>Memory Safety: Chromium</h2>
<p>“Around 70% of our high severity security bugs are memory unsafety problems (that is, mistakes with C/C++ pointers). Half of those are use-after-free bugs.” <img data-src="Chromium_Memory_Safety.png" /></p>
<p>(see Chromium.org Security -&gt; Memory Safety)</p>
</section>
<section id="ownership" class="slide level2">
<h2>Ownership</h2>
<ul>
<li>Three ownership rules:
<ul>
<li>Each vaule in Rust has a variable that’s called its <em>owner</em></li>
<li>There can only be one owner at a time</li>
<li>When the owner goes out of scope, the value will be dropped</li>
</ul></li>
<li>All rules enforced at compile time - no runtime overhead!
<ul>
<li>But learning overhead: “fighting the borrow checker”</li>
</ul></li>
<li>References use lifetimes - may never outlive referent!
<ul>
<li>Lifetime annotations to help borrow checker</li>
</ul></li>
</ul>
</section>
<section id="references-borrowing" class="slide level2">
<h2>References &amp; Borrowing</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">let</span> s <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="st">&quot;fump&quot;</span>)<span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="kw">let</span> s2 <span class="op">=</span> s<span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> s)<span class="op">;</span> <span class="co">// ERROR, s moved, String does not implement Copy!</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">fn</span> change(some_string<span class="op">:</span> <span class="op">&amp;</span><span class="dt">String</span>) <span class="op">{</span> <span class="co">// needs mutable ref!</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>    some_string<span class="op">.</span>push_str(<span class="st">&quot;bar&quot;</span>)<span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3"></a><span class="op">}</span></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>    <span class="kw">let</span> <span class="kw">mut</span> s <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="st">&quot;foo&quot;</span>)<span class="op">;</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>    change(<span class="op">&amp;</span>s)<span class="op">;</span> <span class="co">// needs mutable ref!</span></span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="compiler-error" class="slide level2">
<h2>Compiler Error</h2>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1"></a><span class="ex">error</span>[E0596]: cannot borrow <span class="kw">`</span><span class="ex">*some_string</span><span class="kw">`</span> as mutable, as it is behind a <span class="kw">`&amp;`</span> reference</span>
<span id="cb26-2"><a href="#cb26-2"></a> <span class="ex">--</span><span class="op">&gt;</span> src/main.rs:2:5</span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="kw">|</span></span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="ex">1</span> <span class="kw">|</span> <span class="ex">fn</span> change(some_string: <span class="kw">&amp;</span><span class="ex">String</span>) <span class="kw">{</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="kw">|</span>                        <span class="ex">-------</span> help: consider changing this to be a mutable </span>
<span id="cb26-6"><a href="#cb26-6"></a>                                         <span class="ex">reference</span>: <span class="kw">`&amp;</span><span class="ex">mut</span> std::string::String<span class="kw">`</span></span>
<span id="cb26-7"><a href="#cb26-7"></a><span class="ex">2</span> <span class="kw">|</span>     <span class="ex">some_string.push_str</span>(<span class="st">&quot;, world&quot;</span>);</span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="kw">|</span>     ^^^^^^^^^^^ <span class="kw">`</span><span class="ex">some_string</span><span class="kw">`</span> <span class="ex">is</span> a <span class="kw">`&amp;`</span> reference, so the data it refers to cannot </span>
<span id="cb26-9"><a href="#cb26-9"></a>                     <span class="ex">be</span> borrowed as mutable</span></code></pre></div>
</section>
<section id="mutable-borrow" class="slide level2">
<h2>Mutable Borrow</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">let</span> <span class="kw">mut</span> s <span class="op">=</span> <span class="dt">String</span><span class="pp">::</span>from(<span class="st">&quot;foo&quot;</span>)<span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="kw">let</span> r1 <span class="op">=</span> <span class="op">&amp;</span><span class="kw">mut</span> s<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="kw">let</span> r2 <span class="op">=</span> <span class="op">&amp;</span><span class="kw">mut</span> s<span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4"></a><span class="pp">println!</span>(<span class="st">&quot;{}, {}&quot;</span><span class="op">,</span> r1<span class="op">,</span> r2)<span class="op">;</span></span></code></pre></div>
<ul>
<li>Compiler Error</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1"></a><span class="ex">error</span>[E0499]: cannot borrow <span class="kw">`</span><span class="ex">s</span><span class="kw">`</span> as mutable more than once at a time</span>
<span id="cb28-2"><a href="#cb28-2"></a> <span class="ex">--</span><span class="op">&gt;</span> src/main.rs:4:14</span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="kw">|</span></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="ex">3</span> <span class="kw">|</span>     <span class="bu">let</span> r1 = <span class="kw">&amp;</span><span class="ex">mut</span> s<span class="kw">;</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="kw">|</span>              <span class="ex">------</span> first mutable borrow occurs here</span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="ex">4</span> <span class="kw">|</span>     <span class="bu">let</span> r2 = <span class="kw">&amp;</span><span class="ex">mut</span> s<span class="kw">;</span></span>
<span id="cb28-7"><a href="#cb28-7"></a>  <span class="kw">|</span>              ^^^^^^ <span class="ex">second</span> mutable borrow occurs here</span>
<span id="cb28-8"><a href="#cb28-8"></a><span class="ex">5</span> <span class="kw">|</span>     <span class="ex">println</span>!(<span class="st">&quot;{} {}&quot;</span>, r1, r2);</span>
<span id="cb28-9"><a href="#cb28-9"></a>  <span class="kw">|</span>                       <span class="ex">--</span> first borrow later used here</span></code></pre></div>
</section>
<section id="local-lifetimes---annotations" class="slide level2">
<h2>Local Lifetimes - Annotations</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb29-1"><a href="#cb29-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="kw">let</span> y <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3"></a><span class="kw">let</span> z <span class="op">=</span> <span class="op">&amp;</span>y<span class="op">;</span></span></code></pre></div>
<p>“desugared” (some invalid syntax)</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb30-1"><a href="#cb30-1"></a><span class="ot">&#39;a</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>    <span class="kw">let</span> x<span class="op">:</span> <span class="dt">i32</span> <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>    <span class="ot">&#39;b</span><span class="op">:</span> <span class="op">{</span> <span class="co">// b &quot;good enough&quot;</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>        <span class="kw">let</span> y<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> <span class="dt">i32</span> <span class="op">=</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> x<span class="op">;</span></span>
<span id="cb30-5"><a href="#cb30-5"></a>        <span class="ot">&#39;c</span><span class="op">:</span> <span class="op">{</span> <span class="co">// c &quot;good enough&quot;</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>            <span class="kw">let</span> z<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;c</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> <span class="dt">i32</span> <span class="op">=</span> <span class="op">&amp;</span><span class="ot">&#39;c</span> y<span class="op">;</span></span>
<span id="cb30-7"><a href="#cb30-7"></a>        <span class="op">}</span></span>
<span id="cb30-8"><a href="#cb30-8"></a></span>
<span id="cb30-9"><a href="#cb30-9"></a>    <span class="op">}</span></span>
<span id="cb30-10"><a href="#cb30-10"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="local-lifetimes---add-outer-lifetime" class="slide level2">
<h2>Local Lifetimes - add outer lifetime</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb31-1"><a href="#cb31-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="kw">let</span> y <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="kw">let</span> z <span class="op">=</span> <span class="op">&amp;</span>y<span class="op">;</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>z <span class="op">=</span> y<span class="op">;</span></span></code></pre></div>
<p>“desugared” (some invalid syntax)</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb32-1"><a href="#cb32-1"></a><span class="ot">&#39;a</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>    <span class="kw">let</span> x<span class="op">:</span> <span class="dt">i32</span> <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>    <span class="ot">&#39;b</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>        <span class="kw">let</span> z<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> <span class="dt">i32</span><span class="op">;</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>        <span class="ot">&#39;c</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>            <span class="co">// must use &#39;b here because reference is passed to that scope</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>            <span class="kw">let</span> y<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> <span class="dt">i32</span> <span class="op">=</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> x<span class="op">;</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>            z <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb32-9"><a href="#cb32-9"></a>        <span class="op">}</span></span>
<span id="cb32-10"><a href="#cb32-10"></a></span>
<span id="cb32-11"><a href="#cb32-11"></a>    <span class="op">}</span></span>
<span id="cb32-12"><a href="#cb32-12"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="reference-outliving-referent" class="slide level2">
<h2>Reference outliving referent</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb33-1"><a href="#cb33-1"></a><span class="kw">fn</span> as_str(data<span class="op">:</span> <span class="op">&amp;</span><span class="dt">u32</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="dt">str</span> <span class="op">{</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>    <span class="kw">let</span> s <span class="op">=</span> <span class="pp">format!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>    <span class="op">&amp;</span>s</span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="op">}</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">// desugars to</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="kw">fn</span> as_str<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(data<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">u32</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span> <span class="op">{</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>    <span class="ot">&#39;b</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb33-8"><a href="#cb33-8"></a>        <span class="kw">let</span> s <span class="op">=</span> <span class="pp">format!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> data)<span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9"></a>        <span class="kw">return</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> s<span class="op">;</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>    <span class="op">}</span></span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>ref to s must outlive ’a, but defined in ’b, which is inside ’a -&gt; ERROR</li>
</ul>
</section>
<section id="area-covered-by-lifetimes" class="slide level2">
<h2>Area covered by Lifetimes</h2>
<div class="sourceCode" id="cb34"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb34-1"><a href="#cb34-1"></a></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="kw">let</span> <span class="kw">mut</span> data <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="kw">let</span> x <span class="op">=</span> <span class="op">&amp;</span>data[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb34-5"><a href="#cb34-5"></a><span class="co">// This is OK, x is no longer needed</span></span>
<span id="cb34-6"><a href="#cb34-6"></a>data<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb35-1"><a href="#cb35-1"></a><span class="kw">let</span> <span class="kw">mut</span> data <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="kw">let</span> x <span class="op">=</span> <span class="op">&amp;</span>data[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>data<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="co">// This fails</span></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x)<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb36-1"><a href="#cb36-1"></a><span class="co">// ... also ok</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="kw">if</span> (condition()) <span class="op">{</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb36-4"><a href="#cb36-4"></a>    data<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>    data<span class="op">.</span>push(<span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb36-7"><a href="#cb36-7"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="aliasing-mutable-references" class="slide level2">
<h2>Aliasing mutable references</h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">let</span> <span class="kw">mut</span> data <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="kw">let</span> x <span class="op">=</span> <span class="op">&amp;</span>data[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>data<span class="op">.</span>push(<span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x)<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb38-1"><a href="#cb38-1"></a><span class="co">// desugares to</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="ot">&#39;a</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>    <span class="kw">let</span> <span class="kw">mut</span> data<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span><span class="dt">i32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="pp">vec!</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb38-4"><a href="#cb38-4"></a>    <span class="ot">&#39;b</span><span class="op">:</span> <span class="op">{</span> <span class="co">// needs to cover the println for x</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>        <span class="kw">let</span> x<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> <span class="dt">i32</span> <span class="op">=</span> <span class="bu">Index</span><span class="pp">::</span>index<span class="op">&lt;</span><span class="ot">&#39;b</span><span class="op">&gt;</span>(<span class="op">&amp;</span><span class="ot">&#39;b</span> data<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb38-6"><a href="#cb38-6"></a>        <span class="ot">&#39;c</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb38-7"><a href="#cb38-7"></a>            <span class="co">// temporary, cause we don&#39;t need &amp;mut data longer</span></span>
<span id="cb38-8"><a href="#cb38-8"></a>            <span class="dt">Vec</span><span class="pp">::</span>pus(<span class="op">&amp;</span><span class="ot">&#39;c</span> <span class="kw">mut</span> data<span class="op">,</span> <span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb38-9"><a href="#cb38-9"></a>        <span class="op">}</span></span>
<span id="cb38-10"><a href="#cb38-10"></a>        <span class="pp">println!</span>(<span class="st">&quot;{}&quot;</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb38-11"><a href="#cb38-11"></a>    <span class="op">}</span></span>
<span id="cb38-12"><a href="#cb38-12"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>Intuitively: live shared ref to x, try to take mutable ref to data -&gt; ERROR</li>
<li>But: compiler just sees index ’b ref to data and inside ’c mut ref to data -&gt; ERROR</li>
</ul>
</section>
<section id="lifetimes-and-slices-arrays" class="slide level2">
<h2>Lifetimes and Slices / Arrays</h2>
<ul>
<li>Lifetimes are <em>dumb</em>, just markers, but fail on the “safe side”
<ul>
<li>Disallow some valid code, but don’t allow errors!</li>
</ul></li>
<li>Checker understands disjount struct fields, but not slices / arrays</li>
<li>Works most of the time, sometimes needs help, sometimes requires <code>unsafe</code></li>
</ul>
<div class="sourceCode" id="cb39"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">let</span> <span class="kw">mut</span> x <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="kw">let</span> a <span class="op">=</span> <span class="op">&amp;</span><span class="kw">mut</span> x[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb39-3"><a href="#cb39-3"></a><span class="kw">let</span> b <span class="op">=</span> <span class="op">&amp;</span><span class="kw">mut</span> x[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb39-4"><a href="#cb39-4"></a><span class="co">// unsafe fix:</span></span>
<span id="cb39-5"><a href="#cb39-5"></a><span class="kw">fn</span> split_at_mut(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span><span class="op">,</span> mid<span class="op">:</span> <span class="dt">usize</span>) <span class="op">-&gt;</span> (<span class="op">&amp;</span><span class="kw">mut</span> [T]<span class="op">,</span> <span class="op">&amp;</span><span class="kw">mut</span> [T])<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1"></a><span class="ex">error</span>[E0499]: cannot borrow <span class="kw">`</span><span class="ex">x</span>[..]<span class="kw">`</span> as mutable more than once at a time</span>
<span id="cb40-2"><a href="#cb40-2"></a> <span class="ex">--</span><span class="op">&gt;</span> src/lib.rs:4:18</span>
<span id="cb40-3"><a href="#cb40-3"></a>  <span class="kw">|</span></span>
<span id="cb40-4"><a href="#cb40-4"></a><span class="ex">3</span> <span class="kw">|</span>     <span class="bu">let</span> a = <span class="kw">&amp;</span><span class="ex">mut</span> x[0]<span class="kw">;</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>  <span class="kw">|</span>                  <span class="ex">----</span> first mutable borrow occurs here</span>
<span id="cb40-6"><a href="#cb40-6"></a><span class="ex">4</span> <span class="kw">|</span>     <span class="bu">let</span> b = <span class="kw">&amp;</span><span class="ex">mut</span> x[1]<span class="kw">;</span></span>
<span id="cb40-7"><a href="#cb40-7"></a>  <span class="kw">|</span>                  ^^^^ <span class="ex">second</span> mutable borrow occurs here</span>
<span id="cb40-8"><a href="#cb40-8"></a><span class="ex">5</span> <span class="kw">|</span>     <span class="ex">println</span>!(<span class="st">&quot;{} {}&quot;</span>, a, b);</span>
<span id="cb40-9"><a href="#cb40-9"></a><span class="ex">6</span> <span class="kw">|</span> }</span>
<span id="cb40-10"><a href="#cb40-10"></a>  <span class="kw">|</span> <span class="ex">-</span> first borrow ends here</span></code></pre></div>
</section>
<section id="lifetime-elision-examples-from-nomicon" class="slide level2">
<h2>Lifetime Elision Examples (from <a href="https://doc.rust-lang.org/nomicon/lifetime-elision.html">Nomicon</a> )</h2>
<div class="sourceCode" id="cb41"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb41-1"><a href="#cb41-1"></a><span class="kw">fn</span> print(s<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>)<span class="op">;</span>                                      <span class="co">// elided</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="kw">fn</span> print<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(s<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span>)<span class="op">;</span>                               <span class="co">// expanded</span></span>
<span id="cb41-3"><a href="#cb41-3"></a></span>
<span id="cb41-4"><a href="#cb41-4"></a><span class="kw">fn</span> debug(lvl<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> s<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>)<span class="op">;</span>                          <span class="co">// elided</span></span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="kw">fn</span> debug<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(lvl<span class="op">:</span> <span class="dt">usize</span><span class="op">,</span> s<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span>)<span class="op">;</span>                   <span class="co">// expanded</span></span>
<span id="cb41-6"><a href="#cb41-6"></a></span>
<span id="cb41-7"><a href="#cb41-7"></a><span class="kw">fn</span> substr(s<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> until<span class="op">:</span> <span class="dt">usize</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">;</span>               <span class="co">// elided</span></span>
<span id="cb41-8"><a href="#cb41-8"></a><span class="kw">fn</span> substr<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(s<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span><span class="op">,</span> until<span class="op">:</span> <span class="dt">usize</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="dt">str</span><span class="op">;</span>     <span class="co">// expanded</span></span></code></pre></div>
<div class="sourceCode" id="cb42"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb42-1"><a href="#cb42-1"></a><span class="kw">fn</span> get_str() <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">;</span>                                   <span class="co">// ILLEGAL</span></span>
<span id="cb42-2"><a href="#cb42-2"></a></span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="kw">fn</span> frob(s<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> t<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">;</span>                      <span class="co">// ILLEGAL</span></span>
<span id="cb42-4"><a href="#cb42-4"></a></span>
<span id="cb42-5"><a href="#cb42-5"></a><span class="kw">fn</span> get_mut(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="kw">mut</span> T<span class="op">;</span>                        <span class="co">// elided</span></span>
<span id="cb42-6"><a href="#cb42-6"></a><span class="kw">fn</span> get_mut<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(<span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="kw">mut</span> <span class="kw">self</span>) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="kw">mut</span> T<span class="op">;</span>              <span class="co">// expanded</span></span>
<span id="cb42-7"><a href="#cb42-7"></a></span>
<span id="cb42-8"><a href="#cb42-8"></a><span class="kw">fn</span> args<span class="op">&lt;</span>T<span class="op">:</span> ToCStr<span class="op">&gt;</span>(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span><span class="op">,</span> args<span class="op">:</span> <span class="op">&amp;</span>[T]) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="kw">mut</span> Command                  <span class="co">// elided</span></span>
<span id="cb42-9"><a href="#cb42-9"></a><span class="kw">fn</span> args<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">,</span> <span class="ot">&#39;b</span><span class="op">,</span> T<span class="op">:</span> ToCStr<span class="op">&gt;</span>(<span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="kw">mut</span> <span class="kw">self</span><span class="op">,</span> args<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;b</span> [T]) <span class="op">-&gt;</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="kw">mut</span> Command <span class="co">// expanded</span></span>
<span id="cb42-10"><a href="#cb42-10"></a></span>
<span id="cb42-11"><a href="#cb42-11"></a><span class="kw">fn</span> new(buf<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> [<span class="dt">u8</span>]) <span class="op">-&gt;</span> BufWriter<span class="op">;</span>                    <span class="co">// elided</span></span>
<span id="cb42-12"><a href="#cb42-12"></a><span class="kw">fn</span> new<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>(buf<span class="op">:</span> <span class="op">&amp;</span><span class="ot">&#39;a</span> <span class="kw">mut</span> [<span class="dt">u8</span>]) <span class="op">-&gt;</span> BufWriter<span class="op">&lt;</span><span class="ot">&#39;a</span><span class="op">&gt;</span>          <span class="co">// expanded</span></span></code></pre></div>
</section>
<section id="not-covered-but-interesting" class="slide level2">
<h2>Not covered but interesting</h2>
<ul>
<li><a href="https://doc.rust-lang.org/std/">std</a> library</li>
<li><a href="https://doc.rust-lang.org/cargo/">Cargo</a>, <a href="https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html">Modules and Packages</a></li>
<li>Pointers/Wrappers - <code>Box&lt;T&gt;</code>, <code>Rc&lt;T&gt;</code>, <code>Arc&lt;T&gt;</code>, <code>Cell&lt;T&gt;</code>, <code>RefCell&lt;T&gt;</code></li>
<li>Standardized Serialization with <a href="https://serde.rs/">Serde</a></li>
<li>Standardized SQL / ORM with <a href="http://diesel.rs/">Diesel</a></li>
<li>Async / Await - see <a href="https://rust-lang.github.io/async-book/">Async Book</a>
<ul>
<li><a href="https://github.com/tokio-rs/tokio">Tokio</a> / <a href="https://github.com/rayon-rs/rayon">Rayon</a> async libs</li>
<li><a href="https://rocket.rs/">Rocket</a> / <a href="https://github.com/actix/actix-web">Actix</a> web frameworks</li>
</ul></li>
<li>Advanced language features: “hygienic” Macros, Generics, FFI</li>
</ul>
</section>
<section id="questions" class="slide level2">
<h2>Questions?</h2>
<p><img data-src="compiler_drives.jpg" /></p>
<p>(<a href="http://leftoversalad.com/c/015_programmingpeople/">from Leftover Salad - Programming Languages as People</a>)</p>
<ul>
<li>Microsoft Slide taken from <a href="https://github.com/microsoft/MSRC-Security-Research/blob/master/presentations/2019_02_BlueHatIL/2019_01%20-%20BlueHatIL%20-%20Trends%2C%20challenge%2C%20and%20shifts%20in%20software%20vulnerability%20mitigation.pdf">Microsoft MSRC Security Research Github</a>, also see <a href="https://msrc-blog.microsoft.com/2019/07/16/a-proactive-approach-to-more-secure-code/">MSRC Blog</a></li>
<li>Rust Logo from <a href="https://www.rust-lang.org">rust-lang.org</a></li>
</ul>
</section>
    </div>
  </div>

  <script src="template/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Transition style
        transition: 'none', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: '90%',
        height: '90%',

        // Optional reveal.js plugins
        dependencies: [
          { src: 'template/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'template/plugin/zoom-js/zoom.js', async: true },
          { src: 'template/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
